# 项目后端总体
## 总体架构
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214124215633-697015626.png)
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214131603876-1995450388.png)
不同类型的日志，不同的数据库阿里云腾讯云，不同的mock数据，中间件网关负责控制任务分发，后端有线程池进行发送消息给消息中心控制信号。由后端发送给消息中心对信号进行错误码编码（编码表）

### 辅助层
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214125627589-1841893152.png)

### 目录设计
对资源进行分类，分为一二级目录文件夹，使用思维导图
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214131236665-1537499926.png)
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214131241240-885188514.png)
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214131254736-195073078.png)

### QTEST单元测试
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214132033715-1379877917.png)![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214132101950-1780621464.png)

### 网关
转发限流统计
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214132848664-1402405146.png)

### 消息中心
信号灾难，信号槽乱连接
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214133141949-186293485.png)
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214133211133-2074796808.png)

### 全局管理模块
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214133254056-1402862681.png)
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214133259475-946111757.png)

### 集成sdk的接口
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214134536323-1051490546.png)
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214134617522-416735685.png)

### 发布
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214141038256-394401069.png)
需要把用户需要的QT库打包发送给客户或者附带在文件夹里面
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214141134733-1466383182.png)
编译一些脚本的设置
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214141215914-44852308.png)


### 其他
合并多个测试套件迁移到同一个main函数方便管理
将pro文件继续拆分成不同模块，使用pri文件管理整个工程所需要的头文件
SQL bindvalue防止注入 
使用mpvetothread实现多线程可以多次使用run
对象数模型父对象销毁其子对象
信号和槽入如何理解
	软件扩大不不好使用，信号槽的基本概念，使用消息中心来统一管理信号
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214141819989-2025302403.png)


## 其他架构在下面

# 项目客户端基本说明
## 产品需求和使用说明书
### 版本修订记录
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214111032270-1536442031.png)
版本修订记录，用于记录方案修改过程，对于一些修改内容，比较重要的，需要保留原内容，使用删除线删除，而不是直接删除。

### 参考资料
腾讯云对象存储产品介绍：

https://cloud.tencent.com/document/product/436/6222

### 名词解释
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214110739111-678223788.png)

## 系统结构
### 2.1 整体结构
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214103206296-405547122.png)
用户通过config.json的配置文件输入腾讯云对象存储的SDK登录云对象账户

### 2.2 功能结构
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214103332512-660446032.png)

## 3 需求详细说明
### 3.1 原型图
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214104838451-1928446214.png)
- 使用已经注册的对象存储账户，SecretId 和 SecretKey 进行登录
- 为方便用户下次登录，可将本次登录信息缓存，并以可读性更强的登录名进行缓存，在下次登录时可选择登录名登录

### 3.2 主界面
登录成功后，显示用户主界面
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214105145087-1233541273.png)

#### 3.2.1 存储桶列表
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214110244460-1655162658.png)
- 左侧列表项展示目前用户所有存储桶，右侧主区域展示存储桶详情
- 支持搜索功能
- 通过右键可删除存储桶
- 双击存储桶名称，右侧主区域展示对象详情

#### 3.2.2 右侧主区域
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214110008475-1679980555.png)

**3.2.2.1 存储桶/对象展示区**
- 存储桶列表详情：展示桶名称、区域、创建时间
- 对象列表详情：文件名称、文件大小、修改时间
- 目录结构可上钻（面包屑导航）和下钻（双击）
- 目录结构变化，同步更新面包屑导航和翻页按钮

**3.2.2.2 面包屑导航**
- 展示当前文件路径，并可快速切换其它目录

**3.2.2.3 翻页按钮**
- 展示每页显示行数及翻页

**3.2.2.4 工具栏按钮**
- 创建桶：创建存储桶
- 上传：选择本地文件，上传至云端
- 下载：选中一个对象，下载至本地
- 刷新：刷新当前主界面
- 退出登录：退出到登录窗口
- 传输列表：展示当前上传和下载进度

**3.3 传输列表**
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214111430378-169862492.png)
分别展示当前上传和下载进度
进度：要有进度条显示，当前的上传或下载速度，剩余时间。

# 项目难点
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214121827723-1971626411.png)

## 架构设计
架构设计将常见的架构设计方法结合遇到的问题整理然后抽象成解决方法，让用户更加满意，产品重构更加容易，重复写代码没有意义

### 插件
不同类型的日志、数据库、平台存储库继承自各自的基类，探后使用一个插件管理器单例来实现、对内标准化，对外差异化。可以外界日志库或者自定义日志库。多线程打印。
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214122343412-1337656638.png)

### 日志
用户和程序员都可以根据错误码查询错误信息
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214122745393-1109834220.png)
线程同步的问题使用movetothread根据发出信号是什么等级的信号由日志线程来写入日志文件

### 错误码
角色（用户） 类型（模块是哪个错了）
使用命名空间定义错误码层次结构，编写错误码表
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214123632981-30117172.png)

### 版本
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214123230030-125333266.png)
根据配置文件修改陪住或者命令行直接输出然后由插件管理器，版本设计会打开商业版和用户版使用不同的数据库

内侧和公测类别 版本号的编写  
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214123825100-1765240871.png)

### 环境管理
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214124057587-1115056220.png)

### 分层
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214124420886-1364271218.png)
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214124215633-697015626.png)

## 页面布局与美化

### 界面设计原则
**聚类原则**：把功能相近的组件根据聚类原则组合起来，并且分类，组合提升成一个子界面（面包屑的组件是一个界面）
**单一性界面**：刷新界面写在不同的存储桶界面中都有，刷新的功能是不一样的，功能清晰

### 公共组件开发
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214135932359-813666702.png)
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214140205219-1622342094.png)

基础窗口是通用于其他软件可以复用的，并且可以派生，界面风格也相对统一

![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214135408650-316960836.png)
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214135423458-54753058.png)

### 功能界面(主、子)
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214140711804-1486922157.png)

![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214140300800-247776465.png)
调用接口由网关给单例中的其他类接受关注者返回的信号

### css
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214140842923-1937197453.png)
![image](https://img2024.cnblogs.com/blog/3124760/202402/3124760-20240214140914343-437444806.png)
导入样式表

# 常见面试题
https://www.nowcoder.com/discuss/455307982692196352

https://blog.csdn.net/qq_33462307/article/details/108998579

https://juejin.cn/post/7231519213894058042

https://blog.csdn.net/qq_35693630/article/details/122807833


